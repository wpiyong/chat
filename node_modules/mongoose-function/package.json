{
  "_args": [
    [
      {
        "raw": "mongoose-function@^0.1.0",
        "scope": null,
        "escapedName": "mongoose-function",
        "name": "mongoose-function",
        "rawSpec": "^0.1.0",
        "spec": ">=0.1.0 <0.2.0",
        "type": "range"
      },
      "/Users/yliu/glx/glx-chat"
    ]
  ],
  "_from": "mongoose-function@>=0.1.0 <0.2.0",
  "_id": "mongoose-function@0.1.0",
  "_inCache": true,
  "_location": "/mongoose-function",
  "_npmUser": {
    "name": "aaron",
    "email": "aaron.heckmann+github@gmail.com"
  },
  "_npmVersion": "1.2.10",
  "_phantomChildren": {},
  "_requested": {
    "raw": "mongoose-function@^0.1.0",
    "scope": null,
    "escapedName": "mongoose-function",
    "name": "mongoose-function",
    "rawSpec": "^0.1.0",
    "spec": ">=0.1.0 <0.2.0",
    "type": "range"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/mongoose-function/-/mongoose-function-0.1.0.tgz",
  "_shasum": "c09b531ad5b58a96fda9e8286a6ee472f7fac4ea",
  "_shrinkwrap": null,
  "_spec": "mongoose-function@^0.1.0",
  "_where": "/Users/yliu/glx/glx-chat",
  "author": {
    "name": "Aaron Heckmann",
    "email": "aaron.heckmann+github@gmail.com"
  },
  "bugs": {
    "url": "https://github.com/aheckmann/mongoose-function/issues"
  },
  "dependencies": {},
  "description": "Function storage for Mongoose",
  "devDependencies": {
    "mocha": "*",
    "mongoose": "3.5.6"
  },
  "directories": {},
  "dist": {
    "shasum": "c09b531ad5b58a96fda9e8286a6ee472f7fac4ea",
    "tarball": "https://registry.npmjs.org/mongoose-function/-/mongoose-function-0.1.0.tgz"
  },
  "homepage": "https://github.com/aheckmann/mongoose-function#readme",
  "keywords": [
    "mongoose",
    "function",
    "code",
    "scope",
    "type",
    "schematype",
    "schema"
  ],
  "license": "MIT",
  "main": "index.js",
  "maintainers": [
    {
      "name": "aaron",
      "email": "aaron.heckmann+github@gmail.com"
    }
  ],
  "name": "mongoose-function",
  "optionalDependencies": {},
  "readme": "#mongoose-function\n===================\n\nProvides [Mongoose](http://mongoosejs.com) support for storing functions.\n\n[![Build Status](https://travis-ci.org/aheckmann/mongoose-function.png?branch=master)](http://travis-ci.org/aheckmann/mongoose-function)\n\nExample:\n\n```js\nvar mongoose = require('mongoose')\nrequire('mongoose-function')(mongoose);\n\nvar mySchema = Schema({ func: Function });\nvar M = mongoose.model('Functions', mySchema);\n\nvar m = new M;\nm.func = function(){\n  console.log('stored function')\n}\nm.save(function (err) {\n  M.findById(m._id, function (err, doc) {\n    doc.func(); // logs \"stored function\"\n  });\n});\n```\n\nStoring function scope isn't supported. Just store it in a separate document property.\n\n#### Security\n\n- string arguments are first trimmed\n- empty strings are cast to `null`\n- strings MUST begin with \"function\" or casting will fail\n- all string content after the function closes is ignored (`\"function a(){ return 108 } thisIsIgnored()\"`)\n- only valid function strings (per above rules), `Code` instances, functions, or `null` values are permitted\n\nWe are validating function validity but not function content. Side affects of function execution are not guaranteed to be safe. **You are responsible for validating function safety before execution.** For example, if function content is updated in the database to something that would do something destructive like remove files, drop database collections, etc, and you execute that function, you've been warned.\n\n#### Custom Function Conversion\n\nIf you'd like to perform custom conversion logic or further validate function contents, you may override the default converter like so:\n\n```js\nvar mongoose = require('mongoose')\nrequire('mongoose-function')(mongoose, { toFunction: YourCustomConverter });\n```\n\nNow, whenever `mongoose.Types.Function.toFunction` would have been called, `YourCustomConverter` will be called instead.\n\nCustom conversion functions MUST return either a `function` or `null` to be considered valid, otherwise a `CastError` will occur. ( _NOTE: mongoose CastErrors do not show up until the document is saved_ ).\n\nIf you'd like to use the default converter but perform some additional validation on the retuned function, you might set up your converter like so:\n\n```js\nvar mongoose = require('mongoose')\nrequire('mongoose-function')(mongoose, { toFunction: YourCustomConverter });\nvar convert = mongoose.Types.Function.toFunction;\n\nfunction YourCustomConverter () {\n  var res = convert.apply(undefined, arguments);\n  if (null === res) return res;\n\n  // validate res function contents here\n  // ...\n  return res\n}\n```\n\n#### MongooseFunction Differences\n\nThe only difference between a `MongooseFunction` and a native function is `MongooseFunction.valueOf()` returns a string instead of the function itself. This is for compatibility with Mongoose.\n\n#### BSON Code\n\n`MongooseFunction` does not store functions using the `Code` BSON type. The reason for this is that `Code` does not allow for searching by `RegExp`. As such, storing function scope is not directly supported, instead, store the scope in another document property.\n\n### install\n\n```\nnpm install mongoose-function\n```\n\n[LICENSE](https://github.com/aheckmann/mongoose-function/blob/master/LICENSE)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git://github.com/aheckmann/mongoose-function.git"
  },
  "scripts": {
    "test": "make test"
  },
  "version": "0.1.0"
}
